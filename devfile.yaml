# Devfile for OpenShift Dev Spaces with Jupyter Notebook
# Reference: https://eclipse.dev/che/docs/stable/administration-guide/configuring-editors-definitions/

schemaVersion: 2.1.0

metadata:
  name: jupyter-workspace
  displayName: Jupyter Notebook Workspace
  description: Data science workspace with Jupyter Notebook

components:
  # Explicit volume with size to avoid 0-size PVC error
  - name: projects
    volume:
      size: 5Gi

  - name: jupyter
    container:
      image: quay.io/jupyter/minimal-notebook:latest
      memoryLimit: 4Gi
      memoryRequest: 1Gi
      mountSources: true
      sourceMapping: /home/jovyan/work
      volumeMounts:
        - name: projects
          path: /home/jovyan/work
      env:
        - name: JUPYTER_ENABLE_LAB
          value: "yes"
      endpoints:
        - name: jupyter
          targetPort: 8888
          exposure: public
          protocol: https
