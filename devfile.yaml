# Devfile for OpenShift Dev Spaces WITHOUT VS Code
# Uses editorFree: true to prevent any IDE from starting
#
# Reference: https://eclipse.dev/che/docs/stable/administration-guide/configuring-editors-definitions/

schemaVersion: 2.3.0

attributes:
  editorFree: true

metadata:
  name: devspaces-no-vscode-test
  displayName: Dev Spaces - No VS Code Test
  description: "Testing workspace without VS Code"

components:
  - name: runtime
    container:
      # Red Hat UBI with Python - designed for OpenShift arbitrary UIDs
      image: registry.access.redhat.com/ubi9/python-311:latest
      # Simple HTTP server to verify the workspace is running
      command: ["/bin/bash"]
      args: 
        - "-c"
        - |
          echo "=== Workspace Started Successfully ==="
          echo "VS Code has been disabled (editorFree: true)"
          echo "Starting simple HTTP server on port 8080..."
          cd /tmp
          echo "<html><body><h1>Workspace Running!</h1><p>VS Code is disabled. This is a simple test page.</p></body></html>" > index.html
          python -m http.server 8080
      memoryLimit: '2Gi'
      memoryRequest: '512Mi'
      cpuLimit: '1'
      cpuRequest: '250m'
      endpoints:
        - name: web
          targetPort: 8080
          exposure: public
          protocol: https
          attributes:
            type: main
            cookiesAuthEnabled: true
            urlRewriteSupported: true
