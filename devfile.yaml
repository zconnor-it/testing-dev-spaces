# Devfile for OpenShift Dev Spaces
# To disable VS Code, use a custom editor definition deployed to the cluster
# Reference: https://eclipse.dev/che/docs/stable/administration-guide/configuring-editors-definitions/

schemaVersion: 2.1.0

metadata:
  name: devspaces-test

components:
  - name: runtime
    container:
      # Red Hat UBI with Python - designed for OpenShift arbitrary UIDs
      image: registry.access.redhat.com/ubi9/python-311:latest
      memoryLimit: 2Gi
      mountSources: true
      # Simple HTTP server to verify the workspace is running
      command: ["/bin/bash"]
      args: 
        - "-c"
        - |
          echo "=== Workspace Started ==="
          echo "Starting simple HTTP server on port 8080..."
          cd /tmp
          echo "<html><body><h1>Workspace Running!</h1><p>Custom runtime container is active.</p></body></html>" > index.html
          python -m http.server 8080
      endpoints:
        - name: web
          targetPort: 8080
          exposure: public
          protocol: https
